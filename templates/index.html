<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Briefkasten Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        .status-card { text-align: center; padding: 20px; border-radius: 15px; margin-bottom: 20px; transition: all 0.3s ease; }
        .state-empty { background-color: #2ecc71; color: white; }
        .state-mail { background-color: #f1c40f; color: black; }
        .state-full { background-color: #e74c3c; color: white; }
        .state-emptied { background-color: #3498db; color: white; }
        .huge-icon { font-size: 4rem; display: block; margin-bottom: 10px; }
        .metric-value { font-size: 2rem; font-weight: bold; }
    </style>
</head>
<body>
    <main class="container">
        <hgroup>
            <h1>ğŸ“¬ Smart Mailbox Monitor</h1>
            <h2>Live Status vom ESP32</h2>
        </hgroup>

        <article id="status-card" class="status-card state-empty">
            <span id="status-icon" class="huge-icon">ğŸ“­</span>
            <h3 id="status-text">Warte auf Daten...</h3>
            <small>Zustand</small>
        </article>

        <div class="grid">
            <article>
                <header>ğŸ“ Distanz Sensor</header>
                <div class="metric-value"><span id="distance">--</span> cm</div>
                <progress id="dist-progress" value="0" max="100"></progress>
                <small>Rohwert vom Ultraschall</small>
            </article>

            <article>
                <header>ğŸ“¡ SignalqualitÃ¤t</header>
                <div class="metric-value"><span id="confidence">--</span> %</div>
                <small>Erfolgsrate der Messung</small>
            </article>
        </div>

        <article>
            <header>ğŸ“ Letzte Ereignisse</header>
            <table role="grid">
                <thead>
                    <tr>
                        <th>Zeit</th>
                        <th>Event</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody id="event-log">
                    </tbody>
            </table>
        </article>

        <footer>
            <small>Verbindung zum Server: <span id="ws-status" style="color:red">Getrennt</span></small>
        </footer>
    </main>

    <script src="/static/script.js"></script>
</body>
</html>
