<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Briefkasten Dashboard</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        .status-card { text-align: center; padding: 20px; border-radius: 15px; margin-bottom: 20px; transition: all 0.3s ease; }
        .state-empty { background-color: #2ecc71; color: white; }
        .state-mail { background-color: #f1c40f; color: black; }
        .state-full { background-color: #e74c3c; color: white; }
        .state-emptied { background-color: #3498db; color: white; }
        .huge-icon { width: 200px; height: auto; display: block; margin: 0 auto 10px; }
        .metric-value { font-size: 2rem; font-weight: bold; }
        .metric-section { display: flex; align-items: center; gap: 16px; margin-top: 12px; }
        .metric-icon { width: 80px; height: 80px; object-fit: contain; }
        .events-container { display: flex; align-items: stretch; }
        .events-icon { width: 80px; height: auto; margin-right: 20px; flex-shrink: 0; }
        .events-content { flex-grow: 1; }
    </style>
</head>
<body>
    <main class="container">
        <article id="status-card" class="status-card state-empty">
            <img id="status-icon" class="huge-icon" src="/static/empty.png" alt="Mailbox Status">
            <h3 id="status-text">Warte auf Daten...</h3>
        </article>

        <div class="grid">
            <article>
                <header>Distanz Sensor</header>
                <div class="metric-section">
                    <img src="/static/distance.png" alt="Distanz Icon" class="metric-icon">
                    <div>
                        <div class="metric-value"><span id="distance">--</span> cm</div>
                        <progress id="dist-progress" value="0" max="100"></progress>
                    </div>
                </div>
                <small>Rohwert vom Ultraschall</small>
            </article>

            <article>
                <header>Signalqualität</header>
                <div class="metric-section">
                    <img src="/static/quality.png" alt="Signalqualität Icon" class="metric-icon">
                    <div>
                        <div class="metric-value"><span id="confidence">--</span> %</div>
                    </div>
                </div>
                <small>Erfolgsrate der Messung</small>
            </article>
        </div>

        <article>
            <header>Letzte Ereignisse</header>
            <div class="events-container">
                <img src="/static/past_events.png" alt="Past Events" class="events-icon">
                <div class="events-content">
                    <table role="grid">
                        <thead>
                            <tr>
                                <th>Zeit</th>
                                <th>Event</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody id="event-log">
                            </tbody>
                    </table>
                </div>
            </div>
        </article>

        <footer>
            <small>Verbindung zum Server: <span id="ws-status" style="color:red">Getrennt</span></small>
        </footer>
    </main>

    <script src="/static/script.js"></script>
</body>
</html>
